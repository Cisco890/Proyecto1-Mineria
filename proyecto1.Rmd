---
title: "Proyecto 1"
author: "Luis Pedro Lira 23669, Fernando Rocha 23501, Juan Francisco Martínez 23617"
date: "2026-02-02"
output:
  html_document:
    df_print: paged
  pdf_document:
    latex_engine: xelatex
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE
)

library(tidyverse)
library(readr)

```

```{r}
library(readr)

divorcios <- read_csv("Datos/divorcios_total.csv")
violencia <- read_csv("Datos/violencia_total.csv")

```



## Introducción 
La violencia intrafamiliar constituye un problema social de alta relevancia debido a su impacto en la estabilidad emocional, social y económica de los hogares. Por otro lado, el divorcio representa una consecuencia legal de conflictos persistentes dentro del núcleo familiar, los cuales pueden estar relacionados con dinámicas de violencia y deterioro de la convivencia.

En este proyecto se analiza la posible relación entre los divorcios y la violencia intrafamiliar utilizando datos oficiales correspondientes al año 2022. A través de técnicas de análisis exploratorio de datos y minería de datos, se busca identificar patrones, comportamientos y relaciones entre ambas problemáticas, con el fin de obtener una comprensión más profunda de su interacción a nivel agregado.

El análisis se centra en una exploración descriptiva inicial de los conjuntos de datos, la caracterización de sus variables y la evaluación de posibles relaciones estadísticas entre los indicadores de divorcio y violencia intrafamiliar.

## Objetivos 
**Objetivo General**
Analizar la relación entre los divorcios y la violencia intrafamiliar mediante técnicas de análisis exploratorio y minería de datos, utilizando información correspondiente al año 2022.

**Objetivos específicos**
- Describir las características principales de los conjuntos de datos de divorcios y violencia intrafamiliar.
- Identificar y clasificar las variables numéricas y categóricas presentes en cada conjunto de datos.
-	Realizar un análisis exploratorio de las variables relevantes mediante medidas descriptivas y representaciones gráficas.
- Evaluar posibles relaciones entre indicadores de divorcio y violencia intrafamiliar.



## Descripción general de los datos

Para el desarrollo del presente proyecto se utilizaron dos conjuntos de datos correspondientes al año 2022. El primero contiene información relacionada con los procesos de divorcio, mientras que el segundo recopila registros asociados a casos de violencia intrafamiliar. Ambos conjuntos de datos fueron obtenidos a partir de fuentes oficiales y procesados previamente para su uso en el análisis.

```{r,echo=FALSE, results='hide'}
## Dataset de divorcios

str(divorcios)
str(violencia)
```

## Descripción de las variables: Violencia intrafamiliar

El conjunto de datos de violencia intrafamiliar contiene información detallada sobre las características sociodemográficas de las víctimas y agresores, así como aspectos relacionados con el hecho de violencia reportado. Las variables incluidas permiten analizar dimensiones como edad, sexo, escolaridad, ocupación, estado civil y relación entre víctima y agresor, entre otras.


```{r, echo=FALSE, results='hide'}
## Resumen de tipos de variables en violencia

glimpse(violencia)
```
La mayoría de las variables en el conjunto de datos corresponden a codificaciones numéricas que representan categorías, mientras que otras variables como la edad y las fechas corresponden a valores numéricos continuos o discretos.

```{r}
violencia <- violencia %>%
  mutate(
    vic_edad = ifelse(vic_edad %in% c(99, 999), NA, vic_edad)
  )
```

El conjunto de datos de violencia intrafamiliar presenta valores faltantes (`NA`) en diversas variables, los cuales corresponden principalmente a información no aplicable a todos los registros. Adicionalmente, algunas variables contienen códigos numéricos utilizados para representar valores no especificados, los cuales serán tratados como valores faltantes durante el análisis exploratorio.


## Descripción de las variables: Divorcios

El conjunto de datos de divorcios contiene información asociada a los procesos de disolución del vínculo matrimonial, incluyendo características temporales, geográficas y sociodemográficas de las personas involucradas. Las variables disponibles permiten analizar aspectos como la edad, escolaridad, ocupación y nacionalidad de los cónyuges, así como el lugar y fecha de ocurrencia del divorcio.

```{r, echo=FALSE, results='hide'}
## Resumen de variables en divorcios
glimpse(divorcios)
```

```{r}
divorcios <- divorcios %>%
  mutate(
    EDADHOM = ifelse(EDADHOM == 999, NA, EDADHOM),
    EDADMUJ = ifelse(EDADMUJ == 999, NA, EDADMUJ)
  )
```
Es importante destacar que el conjunto de datos contiene valores faltantes (`NA`) en algunas variables, los cuales corresponden principalmente a información no aplicable o no disponible para ciertos registros. Adicionalmente, algunas variables presentan valores codificados para representar información no especificada, los cuales serán tratados adecuadamente durante el análisis exploratorio.


___


## Exploración de variables numéricas

En esta sección se analizan las principales variables numéricas de los conjuntos de datos de violencia intrafamiliar y divorcios, utilizando medidas de tendencia central, medidas de orden y representaciones gráficas.

```{r}
summary(violencia$vic_edad)
```

La edad de la víctima presenta un rango amplio, desde 1 hasta 98 años, lo cual evidencia que la violencia intrafamiliar afecta a personas de distintas etapas de la vida. La mediana de edad es de 31 años, mientras que la media es de aproximadamente 33 años, lo que indica una ligera asimetría positiva en la distribución. El 50% de las víctimas se concentra entre los 24 y 39 años de edad, sugiriendo que los adultos jóvenes representan el grupo más afectado. Se identificaron 5,046 registros sin información de edad, los cuales serán considerados como valores faltantes en el análisis.


```{r}
violencia <- violencia %>%
  mutate(
    total_hijos = ifelse(total_hijos == 99, NA, total_hijos)
  )
summary(violencia$total_hijos)
```

El número total de hijos de la víctima presenta una mediana de 2 hijos, lo que indica que la mayoría de los casos corresponde a personas con familias pequeñas. La media es cercana a la mediana, lo cual sugiere una distribución relativamente equilibrada. El 75% de las víctimas tiene tres hijos o menos, mientras que los valores máximos observados corresponden a casos aislados de familias numerosas. Se identificó una proporción considerable de valores faltantes, los cuales fueron tratados adecuadamente durante el análisis exploratorio.



```{r}
divorcios <- divorcios %>%
  mutate(
    EDADMUJ = ifelse(EDADMUJ == 999, NA, EDADMUJ),
    EDADHOM = ifelse(EDADHOM == 999, NA, EDADHOM)
  )
```

```{r}
summary(divorcios$EDADMUJ)
```
La edad de la mujer en los procesos de divorcio presenta una mediana de 31 años y una media de aproximadamente 33 años, lo que indica que los divorcios se concentran principalmente en edades adultas jóvenes. El 50% de los casos se encuentra entre los 26 y 38 años, mientras que los valores máximos corresponden a casos aislados de edades avanzadas. La distribución muestra una ligera asimetría positiva y se identifican valores faltantes que fueron considerados adecuadamente durante el análisis.


```{r}
summary(divorcios$EDADHOM)
```

La edad del hombre en los procesos de divorcio presenta una mediana de 34 años y una media de aproximadamente 36 años, lo que sugiere que los hombres tienden a ser ligeramente mayores que las mujeres al momento del divorcio. El rango intercuartílico se ubica entre los 29 y 41 años, concentrando la mayoría de los casos en edades adultas. La distribución presenta una asimetría positiva y algunos valores extremos correspondientes a edades avanzadas.


---


## Exploración de variables categóricas

En esta sección se analizan las principales variables categóricas del conjunto de datos de violencia intrafamiliar. El objetivo es identificar la distribución de los casos según características sociodemográficas y relacionales, utilizando tablas de frecuencia y representaciones gráficas que permitan una mejor comprensión del fenómeno estudiado.

### Sexo de la víctima

Se analiza la distribución de los casos de violencia intrafamiliar según el sexo de la víctima, con el fin de identificar posibles diferencias en la afectación por género.

```{r}
# Tabla de frecuencia: sexo de la víctima
tabla_sexo <- violencia %>%
  filter(!is.na(vic_sexo)) %>%
  count(vic_sexo) %>%
  mutate(porcentaje = n / sum(n) * 100)

tabla_sexo
```
```{r}
# Gráfico de barras: sexo de la víctima
ggplot(tabla_sexo, aes(x = factor(vic_sexo), y = n)) +
  geom_bar(stat = "identity") +
  labs(
    title = "Distribución del sexo de las víctimas",
    x = "Sexo",
    y = "Frecuencia"
  )
```
La distribución evidencia que la violencia intrafamiliar afecta de manera diferenciada según el sexo de la víctima, mostrando una concentración mayor en uno de los grupos, lo cual sugiere la presencia de desigualdades estructurales en el contexto familiar.


### Estado civil de la víctima

El estado civil de la víctima permite analizar el contexto relacional en el que ocurren los hechos de violencia intrafamiliar.

```{r}
# Tabla de frecuencia: estado civil
tabla_estado_civil <- violencia %>%
  filter(!is.na(vic_est_civ)) %>%
  count(vic_est_civ) %>%
  mutate(porcentaje = n / sum(n) * 100)

tabla_estado_civil
```
```{r}
# Gráfico de barras: estado civil
ggplot(tabla_estado_civil, aes(x = factor(vic_est_civ), y = n)) +
  geom_bar(stat = "identity") +
  labs(
    title = "Distribución del estado civil de las víctimas",
    x = "Estado civil",
    y = "Frecuencia"
  )
```
Los resultados muestran que los casos de violencia intrafamiliar se concentran principalmente en ciertos estados civiles, lo cual podría estar asociado a dinámicas de convivencia y conflictos dentro del núcleo familiar.



### Relación entre la víctima y el agresor

Se examina la relación existente entre la víctima y el agresor para identificar los vínculos más frecuentes en los casos reportados de violencia intrafamiliar.

```{r}
# Tabla de frecuencia: relación víctima-agresor
tabla_relacion <- violencia %>%
  filter(!is.na(vic_rel_agr)) %>%
  count(vic_rel_agr) %>%
  mutate(porcentaje = n / sum(n) * 100)

tabla_relacion
```
```{r}
# Gráfico de barras: relación víctima-agresor
ggplot(tabla_relacion, aes(x = factor(vic_rel_agr), y = n)) +
  geom_bar(stat = "identity") +
  labs(
    title = "Relación entre la víctima y el agresor",
    x = "Relación",
    y = "Frecuencia"
  )
```
El análisis evidencia que la mayoría de los casos de violencia intrafamiliar ocurre entre personas con vínculos cercanos, lo cual refuerza la naturaleza intrafamiliar del fenómeno y resalta la importancia de analizar las relaciones personales dentro del hogar.

---

## Relaciones entre las variables. 

### Relación: Diferencia de edad entre Agresor y Víctima
```{r}
## Análisis de Brecha de Edad: Agresor vs Víctima
violencia %>%
  filter(!is.na(vic_edad), !is.na(agr_edad), vic_edad < 90, agr_edad < 90) %>%
  ggplot(aes(x = vic_edad, y = agr_edad)) +
  geom_point(alpha = 0.1, color = "darkred") + 
  geom_abline(intercept = 0, slope = 1, color = "blue", linetype = "dashed") + 
  labs(title = "Relación de Edades: Víctima vs. Agresor",
       subtitle = "La línea azul indica la misma edad. Puntos arriba = Agresor mayor.",
       x = "Edad de la Víctima",
       y = "Edad del Agresor") +
  theme_minimal()
```
El gráfico de dispersión analiza la brecha generacional existente entre la víctima y el agresor en los casos de violencia intrafamiliar. La línea azul discontinua representa la igualdad de edades; por lo tanto, la notable concentración de puntos por encima de esta referencia evidencia que, en la mayoría de los casos reportados, el agresor tiende a ser mayor que la víctima, lo cual sugiere una posible asimetría de poder vinculada a la edad. Adicionalmente, se observa una alta densidad de incidentes (la "nube" más oscura) donde ambas partes oscilan entre los 20 y 40 años, identificando a los adultos jóvenes como el grupo demográfico más vulnerable y activo en esta problemática.


### Relación: Estacionalidad de la Violencia (Mes del hecho)
```{r}
## Análisis Temporal: Violencia por Mes
violencia %>%
  filter(!is.na(hec_mes)) %>%
  group_by(hec_mes) %>%
  summarise(total = n()) %>%
  ggplot(aes(x = factor(hec_mes), y = total)) +
  geom_col(fill = "steelblue") +
  labs(title = "Estacionalidad de la Violencia Intrafamiliar",
       x = "Mes del Año (1 = Enero, 12 = Diciembre)",
       y = "Cantidad de Denuncias") +
  theme_classic()
```
El análisis de estacionalidad revela que la incidencia de violencia intrafamiliar mantiene un comportamiento relativamente constante y sostenido durante gran parte del año, sin caídas drásticas. Se observan ligeros repuntes en los meses de marzo, mayo y julio, los cuales concentran los volúmenes más altos de denuncias (superando los 30,000 casos mensuales). Por otro lado, se percibe una leve tendencia decreciente hacia el último trimestre (octubre a diciembre). Cabe destacar la presencia de una barra etiquetada como "99", la cual corresponde a registros donde el mes de ocurrencia no fue especificado o es desconocido, evidenciando la necesidad de considerar estos valores nulos durante la limpieza de datos para evitar sesgos en el análisis temporal.


